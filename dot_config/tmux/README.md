# tmux 操作マニュアル（macOS）

このリポジトリで設定している tmux のキーバインドと関連コマンドの一覧。

**キー表記**: `prefix` は tmux のプレフィックスキー。本設定ではデフォルトの `C-b`（Mac: **control+b**）。
`prefix` → `x` は「control+b を押して離した後に x を押す」という意味。

---

## セッション管理

### tmux 外からのコマンド

| コマンド | 動作 |
|---------|------|
| `tm` | ghq リポジトリ一覧を fzf で選択 → セッション作成・attach |
| `tm .` | カレントディレクトリでセッション作成・attach（ghq 管理外でも可） |
| `tm <name>` | 指定名でカレントディレクトリにセッション作成・attach |
| `tmux new -s <name>` | 新規セッション作成（ghq 不要） |
| `tmux attach -t <name>` | 既存セッションに attach |
| `tmux ls` | セッション一覧 |

### tmux 内の操作

| 操作 | キー表記 | Mac での押し方 |
|------|---------|---------------|
| セッション一覧・切り替え | `prefix` → `s` | control+b → s |
| デタッチ（tmux から離れる） | `prefix` → `d` | control+b → d |
| セッション終了 | `prefix` → `:` → `kill-session` Enter | control+b → shift+; → `kill-session` Enter |
| セッション名変更 | `prefix` → `$` | control+b → shift+4 |

tmux 内でも `tm` / `tm .` / `tm <name>` が使える（attach ではなく switch になる）。

---

## ウィンドウ操作

ウィンドウ番号は **1 から開始**（`base-index 1`）。閉じたウィンドウの番号は自動で詰められる（`renumber-windows on`）。

| 操作 | キー表記 | Mac での押し方 |
|------|---------|---------------|
| 新規ウィンドウ（カレントディレクトリ） | `prefix` → `c` | control+b → c |
| 次のウィンドウ | `prefix` → `n` | control+b → n |
| 前のウィンドウ | `prefix` → `p` | control+b → p |
| 番号で移動 | `prefix` → `1`〜`9` | control+b → 数字キー |
| ウィンドウ名変更 | `prefix` → `,` | control+b → , |

---

## ペイン操作

### 分割

カレントディレクトリが引き継がれる。

| 操作 | キー表記 | Mac での押し方 |
|------|---------|---------------|
| 横に分割（左右） | `prefix` → `\|` | control+b → shift+\\ |
| 縦に分割（上下） | `prefix` → `-` | control+b → - |

### 移動（Vim スタイル）

| 操作 | キー表記 | Mac での押し方 |
|------|---------|---------------|
| 左のペインへ | `prefix` → `h` | control+b → h |
| 下のペインへ | `prefix` → `j` | control+b → j |
| 上のペインへ | `prefix` → `k` | control+b → k |
| 右のペインへ | `prefix` → `l` | control+b → l |

### リサイズ（Vim スタイル、リピート可）

`-r` 付きのため、prefix 後に連続してリサイズキーを押せる。

| 操作 | キー表記 | Mac での押し方 | 単位 |
|------|---------|---------------|------|
| 左に広げる | `prefix` → `H` | control+b → shift+h | 5 セル |
| 下に広げる | `prefix` → `J` | control+b → shift+j | 5 セル |
| 上に広げる | `prefix` → `K` | control+b → shift+k | 5 セル |
| 右に広げる | `prefix` → `L` | control+b → shift+l | 5 セル |

### その他

| 操作 | キー表記 | Mac での押し方 |
|------|---------|---------------|
| ペインを閉じる | `prefix` → `x` → `y` で確認 | control+b → x → y |

---

## コピーモード（Vi スタイル）

| 操作 | キー表記 | Mac での押し方 |
|------|---------|---------------|
| コピーモードに入る | `prefix` → `[` | control+b → \[ |
| 前方検索 | `/` → 文字列 → Enter | / → 文字列 → Enter |
| 後方検索 | `?` → 文字列 → Enter | shift+/ → 文字列 → Enter |
| 次の一致 | `n` | n |
| 前の一致 | `N` | shift+n |
| 選択開始 | `v` | v |
| 矩形選択トグル | `C-v` | control+v |
| コピー＆終了 | `y` | y |
| 移動 | `h`/`j`/`k`/`l` | hjkl（Vim と同じ） |
| コピーモード終了 | `q` または `Escape` | q または Escape |

---

## fzf 連携

### tmux-fzf プラグイン

| 操作 | キー表記 | Mac での押し方 |
|------|---------|---------------|
| tmux-fzf 起動 | `prefix` → `f` | control+b → f |

起動後、セッション / ウィンドウ / ペイン / コマンド / キーバインドを検索・操作できる。

### シェルコマンド（tmux 内外共通）

| コマンド | 動作 |
|---------|------|
| `tm` | ghq リポジトリを fzf で選択 → セッション作成・切り替え |
| `tm .` | カレントディレクトリでセッション作成・切り替え |
| `tm <name>` | 指定名でセッション作成・切り替え |
| `ghq` / `repo` | ghq リポジトリを fzf で選択 → cd |
| `fbr` | git ブランチを fzf で選択 → checkout（tmux 内ではポップアップ表示） |

---

## プラグイン管理（TPM）

初回は自動で TPM がインストールされる。

| 操作 | キー表記 | Mac での押し方 |
|------|---------|---------------|
| プラグインインストール | `prefix` → `I` | control+b → shift+i |
| プラグイン更新 | `prefix` → `U` | control+b → shift+u |

### インストール済みプラグイン

| プラグイン | 用途 |
|-----------|------|
| tmux-sensible | 常識的なデフォルト設定 |
| tmux-fzf | `prefix` → `f` でセッション等を fzf 検索 |

---

## その他

| 操作 | キー表記 | Mac での押し方 |
|------|---------|---------------|
| 設定リロード | `prefix` → `r` | control+b → r |
| マウス操作 | — | 有効（ペイン選択、スクロール、リサイズ可） |

### ステータスバー

画面上部に表示。左にセッション名（緑）、右に日時（シアン）。アクティブウィンドウは緑太字。
