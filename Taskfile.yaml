version: "3"

tasks:
  generate-claude-settings:
    desc: Generate claude settings.json from jsonnet
    cmds:
      - jsonnet dot_claude/settings.jsonnet > dot_claude/settings.json
      - jsonnet dot_claude/dot_mcp.jsonnet > dot_claude/dot_mcp.json
      - jsonnet dot_gemini/settings.jsonnet > dot_gemini/settings.json
    sources:
      - dot_claude/settings.jsonnet
      - dot_claude/dot_mcp.jsonnet
      - dot_gemini/settings.jsonnet
    generates:
      - dot_claude/settings.json
      - dot_claude/dot_mcp.json

  generate:
    desc: Generate all json files from jsonnet
    deps:
      - generate-claude-settings
